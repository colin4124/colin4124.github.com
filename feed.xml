<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>快乐窝</title>
    <link href="http://funwo.tk/feed.xml" rel="self" />
    <link href="http://funwo.tk/" />
    <updated>2013-08-06T23:35:25+08:00</updated>
    <id>http://funwo.tk/</id>
    <entry>
        <title type="html"><![CDATA[开源库，你该做些什么]]></title>
        <author><name>咧威</name></author>
        <link href="http://funwo.tk/2013-08-06-on-open-sourcing-libraries-cn.html"/>
        <published>2013-08-06T00:00:00+08:00</published>
        <updated>2013-08-06T23:35:25+08:00</updated>
        <id>http://funwo.tk/2013-08-06-on-open-sourcing-libraries-cn.html</id>
        <content type="html" xml:base="http://funwo.tk/" xml:lang="en">
            <![CDATA[ <p>原文地址: <a href="http://williamdurand.fr/2013/07/04/on-open-sourcing-libraries/">On Open Sourcing Libraries</a></p>
<p><a href="#tl-dr">简要概括：TL;DR</a> (<a href="http://en.wikipedia.org/wiki/Wikipedia:Too_long;_didn&#x27;t_read">Too long; didn&#39;t read</a>)</p>
<p>把一个库<a class="footnote-reference" href="#note-1">[1]</a>开源非常简单，仅需几秒钟。你所需要做的仅仅是把公共仓库(public repository) 托管 (hosted) 在网上(<a href="https://github.com/">GitHub</a>, <a href="https://bitbucket.org/">Bitbucket</a>,等等)吗？不！事实上，如果你<strong>对非常酷的并且可以公开使用的库悉心照料</strong>的话<a class="footnote-reference" href="#note-2">[2]</a>，这样做对每个人都是件更好的事情。来看下这些是怎么做到的。</p>

<h2 id="toc_0">README的编写</h2>
<p><code>README</code>文件在你的项目中<strong>占据首要地位</strong>。你的项目必须包含它！这个文件必须包含库的<strong>名字</strong>和一个关于它(简短的)<strong>描述</strong>。把<strong>描述</strong>这一章节当作是<strong>电梯游说</strong> (elevator pitch，在乘电梯的30秒内清晰准确地向客户解释清楚解决方案)。</p>
<p>然后是编写<strong>使用</strong>章节。尽可能详细地用文字、代码片段、截图或者GIF格式的图片，来描述如何使用你的库。这个就是你项目的<strong>文档</strong>, 你的库很多时候也同样如此, 这将会是你唯一提供的文档。 </p>
<p>先写<strong>使用</strong>指南这部分并不是一个随意的选择。<code>README</code>文件应该能吸引读者(blow your reader&#39;s mind)，这样他们就会使用你的库并为它做出贡献(或许不会)。</p>
<p>第三小节必须写<strong>安装</strong>方法。这个小节以*用户*的角度说明怎样快速安装你的库。如果有多种安装方式，首先介绍你认为最好的方式，然后才是(介绍)其他的。</p>
<p>你可以添加一个<strong>依赖</strong>章节，例如，<em>依赖X的Y版本(Depends on X version Y)</em> 。这个章节是可选的，可以不写。</p>
<p>第四个必须编写的小节是<strong>贡献</strong>。尽管它可以使用一个<code>CONTRIBUTING</code> 文件代替。说明<strong>怎样折腾你的库(how to hack your library)</strong>，怎样报告bugs，或者怎样提交特性请求(submit feature requests)。这方面介绍一定要详细。<strong>说明规则</strong>，让收到的请求合并中避免评论每一行<a class="footnote-reference" href="#note-3">[3]</a>，指引贡献者使用恰当的工具(Point contributors to the right tools )，比如linters 或者 compilers。</p>
<p>你还必须添加一个<strong>测试</strong>章节。说明<strong>怎样安装测试套件</strong>，怎样运行功能测试(functional tests)，以及需要安装的工具。</p>
<p>如果你使用第三方的东西，或者打算列出贡献者(当然这个也可以写在<strong>作者</strong>章节)，那就添加一个<strong>信用(Credits)</strong>章节。这个章节是可选的，可以不写。</p>
<p>最后还要记住，添加一个<strong>许可证</strong>章节!</p>
<p>模板如下(<a href="http://wowubuntu.com/markdown/">Markdown</a> 语法)：</p>

<pre><code>project-x     &lt;-------- 一级标题 (项目名字)
=========

project-x is a better way to achieve this and that, by leveraging the new API,
blablabla.
project-x用更好的方式实现某某功能，通过使用高效的新API，此处省略N个字。

## Usage(使用)     &lt;-------- 二级标题
...

## Installation(安装)
...

## Requirements(依赖)
...

## Contributing(贡献)

See CONTRIBUTING file.
查看 CONTRIBUTING 文件。

## Running the Tests(执行测试)
...

## Credits(信用)
...

## License(许可证)

project-x is released under the MIT License. See the bundled LICENSE file for 
details.
project-x 依据 MIT许可证发布。详细请看捆绑的 LICENSE 文件。</code></pre>
<p>正如你所看到的, 我在模板里介绍了两个文件: <code>LICENSE</code>(许可证)和<code>CONTRIBUTING</code>(贡献指南)。<strong>贡献</strong>这一小节的内容用一个文件<code>CONTRIBUTING</code>代替了。<code>LICENSE</code>(许可证)这个文件里包含了你项目选择的许可证，但你应该选用哪个许可证呢？</p>

<h2 id="toc_1">许可证</h2>
<p>我不想把所有的许可证都一一对比，你可以访问<a href="http://www.tldrlegal.com/">tl;drLegal</a>这个网站，它用易懂的话(simple words)向你介绍实用的(useful)开源许可证相关信息。</p>
<p>我倾向于使用 <a href="http://www.tldrlegal.com/license/mit-license">MIT许可证</a>，因为它非常自由(liberal)。我这里的建议是<strong>参考下你的社区</strong>，选择最恰当的一个。比如说，在Symfony2 (一个PHP框架)社区，大多数相关的项目或者bundles 都是以MIT许可证发布的。而Java 的项目经常以Apache许可证2.0(Apache License 2.0)发布的。</p>
<p>根据最近的报道(reports)，<a href="http://www.theregister.co.uk/2013/04/18/github_licensing_study/">大多数 GitHub上的项目没有一个开源许可证</a>。这是不好的(bad)！你必须得有许可证，即使是<a href="http://zh.wikipedia.org/wiki/%E5%95%A4%E9%85%92%E8%BB%9F%E9%AB%94">啤酒软件许可证</a>(<a href="http://en.wikipedia.org/wiki/Beerware">Beerware license</a>)。</p>
<p>正如<a href="https://news.ycombinator.com/item?id=5990836">Hacker News</a>所提到的，<a href="https://news.ycombinator.com/item?id=5992270">精心(carefully)选择你的许可证</a>。并且，<a href="https://news.ycombinator.com/item?id=5992428">不要用你自己做的许可证或者仅仅声明这个项目属于公共领域 (Public domain，简单来说作品已属于全人类)。公共领域在国际上的确不是准确定义的概念，意味着不同国家会有不同的理解</a>。</p>
<p>即使你现在有一个文档完善的库和一个许可证，还是没有“征服世界”(dominate the world)<a class="footnote-reference" href="#note-4">[4]</a>。下面，我给出一个概览，介绍在开源项目中我认为重要的东西。</p>

<h2 id="toc_2">写自动化测试(Write Tests &amp; Automate)</h2>
<p>我们可以通过开源项目写优美的代码，因为这里没有截止期限，也没有“客户”。记住，你项目展示了你能够做什么。作为一个开发者，<strong>你的库就是你的名片</strong>。</p>
<p><strong>写大量的测试</strong>！如果没有提供一个测试套件，怎么去期望别人能为你的库做出贡献呢？因此, 写测试, 和使用 <a href="http://zh.wikipedia.org/zh-cn/Travis_CI">Travis CI</a>。 添加一个 <code>.travis.yml</code> 文件，描述怎么样运行你的测试。这也是另一种方式写如何运行测试的文档。</p>
<p>在你的<code>README</code>文件里也添加一个<a href="http://about.travis-ci.org/docs/user/status-images/">状态图片</a>(status image)。</p>
<p>留意一下(Take a look at)在线工具，例如PHP和JavaScript使用<a href="https://scrutinizer-ci.com/">Scrutinizer</a> , 或者 <a href="http://www.puppetlinter.com/">Puppet Linter</a>。尽量使其自动化。</p>

<h2 id="toc_3">标准化(Be Standard)</h2>
<p>在你的库中<strong>使用恰当的工具(right tools)</strong>是非常重要的。再看一下你的社区，然后选择大家常用(tend to use)的工具。在用PHP写的程序里，大家都用 <a href="http://getcomposer.org/">Composer</a> 作为管理依赖关系的工具(dependency manager)。不要浪费时间去用PEAR或者其他工具，就用Composer。如果是一个Node.js库，在<a href="https://npmjs.org/">npm</a>上注册它。Ruby 的开发者，请把你的库作为<a href="http://guides.rubygems.org/make-your-own-gem/">gem</a>发布(distribute your library as a gem)。C#的开发者，请使用<a href="http://nuget.org/">NuGet</a>。</p>
<p>另一个例子，在Symfony2里，在<code>Resources/doc</code> 里添加文档是一个好的做法(good practice)。这是个惯例。<strong>不要重复出现你的文档</strong>，而是在你的<code>README</code>文件里添加一个快速跳到文档的链接。</p>

<h2 id="toc_4">管理问题(Issues)和版本发布(Releases)</h2>
<p><a href="https://github.com/">GitHub</a>，<a href="http://www.codeplex.com/">CodePlex</a>，或者其他你喜欢的，他们都提供了追踪问题(issue tracker)的工具，请使用它！</p>
<p>如果你使用GitHub，不要浪费时间在Wiki上。我从来没有发现一个适当的工作流程(decent workflow)。用<code>README</code>文件作为你的文档，或者万一(in case)文档量很大(extensive documentation)的时候使用<a href="https://readthedocs.org/">Read The Docs</a>来做托管。使用 GitHub Issues 来管理里程碑，并用标签对问题进行分类。</p>
<p>还有，尝试尽快回复所有的问题&hellip;但<a href="http://williamdurand.fr/2013/02/20/burnout/">be careful, and manage your time</a>。对人友好，花时间帮助新来的人。非常值得去学习<a href="https://medium.com/p/aaa2a5437d3a">如何维护一个成功的开源项目</a>。</p>
<p>另一个建议是，定期地打上版本标签来进行发布(to release often by tagging versions periodically)。谈起版本, 请关注(follow) <a href="http://semver.org/">Semantic Versioning Specification</a>。</p>
<p>然后，用<code>CHANGELOG</code>(更改日志)这个文件来帮助用户识别出你做出的更改。如果你不向后兼容，写一个<code>UPGRADE</code>(升级)文件介绍说明如何升级。</p>

<h2 id="toc_5">你需要反馈！</h2>
<p>我<a href="https://github.com/willdurand?tab=repositories">开源大量项目</a>最主要的原因是，可以从用户的反馈中学到很多东西。所以你需要反馈，我需要反馈，每个人都需要反馈！在Twitter，Hacker News等等上分享你的项目。让全世界都知道！人们必须知道你的项目并不是因为它很出色，令人难忘，而是因为人们可以评论它。</p>
<p>使用 GitHub pages 为你的项目创建主页，如果你愿意还可以买个域名，</p>
<p>还记得&quot;征服世界&quot;的计划吗？你要实现这个目标几乎需要到的，我们永远不知道。</p>

<h2 id="toc_6">雇人(Hire People)</h2>
<p>一旦你&quot;征服世界&quot;，招收别人(enroll new people)<a class="footnote-reference" href="#note-5">[5]</a>来帮助你非常重要这是非常棒的体验。这样会给你更多的时间来搞其他开源项目(也可以说是征服另一个世界的计划) :-)   </p>

<h2 id="toc_7">总而言之</h2>
<p>让一个库开源不仅仅是发布源代码。你还需要再做一些事情来让别人更容易更愉快地使用它。为项目写文档展示了你的教学能力，这样就可以找到恰当的词来表达你的想法。当然，还说明了你在用心地做这件事。</p>
<p>不要忘记在你的库里面添加测试，如果你在工作中不方便，回家再做。还有别忘了许可证，别找借口！</p>
<p>开源项目真的非常酷，但是要避免<a href="http://zh.wikipedia.org/wiki/%E9%9D%9E%E6%88%91%E6%89%80%E5%89%B5">非我发明症</a>(Not Invented Here (NIH) Syndrome)。尽可能地做贡献，而不是再开创一个已有的开源项目，重复造轮子。 </p>

<h2 id="toc_8"><a name="tl-dr"></a>TL;DR</h2>
<p>你的库或者项目：</p>

<ul>
<li>必须有一个<code>README</code>文件，内容包括名字，描述还有以下章节：<strong>使用方法</strong>，<strong>安装指南</strong>，<strong>贡献规范</strong>，<strong>如何测试</strong>和<strong>许可证</strong>；</li>
<li>必须有一个显眼的许可证(MUST have a license that is visible)；</li>
<li>必须能测试(MUST be tested);</li>
<li>必须标准化或者符合你社区的惯例；</li>
</ul>
<p>你：</p>

<ul>
<li>需要反馈；</li>
<li>必须待人友善；</li>
<li>应该招人(enroll people)。</li>
</ul>
<p>顺便说一下：如果你发现排版错误和错别字。请<a href="https://github.com/colin4124/colin4124.github.com/edit/master/_source/content/2013-08-06-on-open-sourcing-libraries-cn.md">派生(fork)和修改它</a>。非常感谢！
本文以<a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>许可证发表。</p>

<h4 id="toc_9">译注：</h4>

<ol>
<li><p><a name="note-1"></a>I use &ldquo;project&rdquo; as a synonym of &ldquo;library&rdquo;,My blog post focuses on libraries as Open Source projects, rather than &ldquo;projects&rdquo; like products (applications). 原作者的开源项目主要是库，所以这篇文章对其他类型的开源项目同样适用。</p></li>
<li><p><a name="note-2"></a>原文：add some love to your new shiny library you just made publicly available. </p>

<ul>
<li>love = take care of </li>
<li>shiny = well, shiny is&hellip; shiny, something which is cool, and beautiful</li>
</ul></li>
<li><p><a name="note-3"></a> 原文：<strong>Explain the rules</strong> to avoid commenting every single line in Pull Requests you receive.</p></li>
<li><p>it&#39;s a joke, 这是个玩笑。</p></li>
<li><p><a name="note-4"></a> 作者原话：enroll = hire (more or less), but it&#39;s not because of the previous sentence. You don&#39;t hire people &ldquo;for real&rdquo; (like a company would do I mean) 因此我把 enroll 译作 招收</p></li>
</ol>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[在 Windows 下使用 Github的配置]]></title>
        <author><name>咧威</name></author>
        <link href="http://funwo.tk/2013-05-01-use-github-in-windows.html"/>
        <published>2013-05-01T08:03:00+08:00</published>
        <updated>2013-08-04T07:50:04+08:00</updated>
        <id>http://funwo.tk/2013-05-01-use-github-in-windows.html</id>
        <category scheme="http://funwo.tk/tag/#技术" term="技术" label="技术" />
        <content type="html" xml:base="http://funwo.tk/" xml:lang="en">
            <![CDATA[ <h2 id="toc_0">通过 Cygwin 安装 git</h2>
<p>至于怎么安装和使用 Cygwin 参考 <a href="/2013-04-28-a-bref-usage-of-cygwin.html">Cygwin:在window下用linux的方式工作</a> </p>
<p>打开<code>setup.exe</code>, 安装 <code>openssh git git-completion</code></p>
<p><img src="/media/2013-05-01-use-github-in-windows/github-1.png" alt="搜索 openssh"/></p>
<p><img src="/media/2013-05-01-use-github-in-windows/github-2.png" alt="搜索git git-completion"/></p>

<h3 id="toc_1">申请github帐号</h3>
<p>打开 <a href="https://github.com/">Github</a> 注册一个帐号</p>

<h3 id="toc_2">设置 git</h3>
<p><strong>1. 设置你的名字， 每次用git 提交时才知道是谁修改的。输入以下命令， 把引号里的Your Name Here 换成是你想起的名字</strong></p>

<pre><code>git config --global user.name &quot;Your Name Here&quot;</code></pre>
<p><strong>2. 设置你的Email， 这得和你在github 申请时用的邮箱一致。把引号里的<a href="mailto:your_email@example.com">your_email@example.com</a> 换成你的邮箱地址</strong></p>

<pre><code>git config --global user.email &quot;your_email@example.com&quot;</code></pre>

<h3 id="toc_3">通过SSH来访问 Github</h3>
<p><strong>1.生成 SSH 密钥</strong></p>

<pre><code>ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</code></pre>
<p><strong>2. 然后你会看到下面的提示，直接按回车</strong></p>

<pre><code>Generating public/private rsa key pair.
# Enter file in which to save the key (/c/Users/you/.ssh/id_rsa):</code></pre>
<p><strong>3. 看到下面这个提示，意思是每次用git 访问 github时，输入的验证短语，可以不写，直接回车</strong></p>

<pre><code>Enter passphrase (empty for no passphrase): [Type a passphrase]
# Enter same passphrase again: [Type passphrase again]</code></pre>
<p><strong>4. 然后输入下面的命令，把SSH key 复制到剪贴板。</strong>
    clip &lt; ~/.ssh/id_rsa.pub</p>
<p><strong>5. 去你github的设置页面(右上角) 添加 这个 SSH key</strong></p>
<p><img src="/media/2013-05-01-use-github-in-windows/github-3.png" alt="github的设置"/></p>
<p><strong>6. 在设置页面左边那一栏找到 SSH Keys</strong></p>
<p><img src="/media/2013-05-01-use-github-in-windows/github-4.png" alt="在设置页面左边那一栏找到 SSH Keys"/></p>
<p><strong>7. 点击&quot;Add SSH key&quot;</strong></p>
<p><img src="/media/2013-05-01-use-github-in-windows/github-6.png" alt="点击&quot;Add SSH key&quot;"/></p>
<p><strong>8. 在 key 那一栏粘贴 SSH key, 确保第4步的命令你已经输入了. Title就是为这个SSH key 做个标记，知道这个SSH key是来自哪里的，比如我的是win7, 就知道是我笔记本上win7的系统</strong></p>
<p><img src="/media/2013-05-01-use-github-in-windows/github-7.png" alt="粘贴 SSH key"/></p>
<p><strong>9. 输入以下命令测试是否可以连接上github</strong></p>

<pre><code>ssh -T git@github.com</code></pre>
<p> <strong>你会看到一个警告，输入 yes</strong></p>

<pre><code>The authenticity of host 'github.com (207.97.227.239)' can't be established.
# RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.
# Are you sure you want to continue connecting (yes/no)?</code></pre>
<p><strong>然后输入你第3步设置的验证短语，没有设置的直接回车</strong></p>
<p><img src="/media/2013-05-01-use-github-in-windows/github-8.png" alt="输入你第3步设置的验证短语"/></p>

<h4 id="toc_4">10. 如果看到下面的提示，恭喜你，成功了</h4>

<pre><code>Hi username! You've successfully authenticated, but GitHub does not
# provide shell access.</code></pre>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[Cygwin：在window下用linux的方式工作]]></title>
        <author><name>咧威</name></author>
        <link href="http://funwo.tk/2013-04-28-a-bref-usage-of-cygwin.html"/>
        <published>2013-04-28T23:17:00+08:00</published>
        <updated>2013-08-04T07:45:48+08:00</updated>
        <id>http://funwo.tk/2013-04-28-a-bref-usage-of-cygwin.html</id>
        <category scheme="http://funwo.tk/tag/#技术" term="技术" label="技术" />
        <content type="html" xml:base="http://funwo.tk/" xml:lang="en">
            <![CDATA[ <h2 id="toc_0">缘起</h2>
<p>咧威习惯了linux之后，换到Windows没有命令行就特别不爽。另一个原因是咧威的朋友CXY在学校没有自己的电脑，只能去机房或者网吧，用linux不方便，虚拟机占资源太大。</p>

<h2 id="toc_1">Cygwin VS MinGW</h2>
<p>这个两个都是在windows体验Linux的工具。<a href="http://zh.wikipedia.org/wiki/MinGW" title="MinGW">MinGW</a> (Minimalist GNU for Windows) 很精简，只提供了常用的软件，对中文支持不太好。而<a href="http://zh.wikipedia.org/wiki/Cygwin" title="Cygwin">Cygwin</a>
提供了大量的工具，更能满足在Windows上用Linux方式工作的需求，希望它能够帮助你摆脱对Windows的依赖。</p>

<h3 id="toc_2">安装</h3>
<p>点击<a href="http://cygwin.com/setup.exe">下载</a>setup.exe，下载完后双击即可开始安装。</p>

<h4 id="toc_3">1. 选择第一个从网上下载安装。</h4>
<p><img src="/media/2013-04-28-a-bref-usage-of-cygwin/setup1.jpg" alt="setup1"/></p>

<h4 id="toc_4">2. 选择安装的目录，咧威选择的是U盘的目录，根据你自己的情况而定.然后选择“All Users”所有用户都可以使用。</h4>
<p><img src="/media/2013-04-28-a-bref-usage-of-cygwin/setup2.png" alt="setup2"/></p>

<h4 id="toc_5">3. 选择一个用来放安装文件的目录,我起了“CygwinInstall-file”这个名字，跟安装目录相区别</h4>
<p><img src="/media/2013-04-28-a-bref-usage-of-cygwin/setup3.png" alt="setup3"/></p>

<h4 id="toc_6">4. 弹出“文件夹不存在，是否创建”，选择“是”</h4>
<p><img src="/media/2013-04-28-a-bref-usage-of-cygwin/setup4.png" alt="setup4"/></p>

<h4 id="toc_7">5. 选择第一个“Direct Connection”直接连接</h4>
<p><img src="/media/2013-04-28-a-bref-usage-of-cygwin/setup5.png" alt="setup5"/></p>

<h4 id="toc_8">6. 在“User URL：” 那一栏输入 <a href="ftp://ftp.iij.ad.jp/pub/cygwin/">ftp://ftp.iij.ad.jp/pub/cygwin/</a> 然后点击“Add” 就是自动选择 <a href="ftp://ftp.iij.ad.jp/pub/cygwin/">ftp://ftp.iij.ad.jp/pub/cygwin/</a> 最后点击“下一步”就行了</h4>
<p><img src="/media/2013-04-28-a-bref-usage-of-cygwin/setup6.png" alt="setup6"/></p>

<h4 id="toc_9">7. 在&quot;Search&quot; 输入 gcc 搜索，然后点击Devel组前的+号，找到 gcc4-core gcc4-g++，</h4>
<p><img src="/media/2013-04-28-a-bref-usage-of-cygwin/setup7.png" alt="setup7"/></p>

<h4 id="toc_10">点击Skip变成如图所示</h4>
<p><img src="/media/2013-04-28-a-bref-usage-of-cygwin/setup8.png" alt="setup8"/></p>

<h4 id="toc_11">8. 同理搜索并选择一下安装包</h4>

<ul>
<li> Devel组：make </li>
<li> Editors组： vim vim-common </li>
</ul>

<h4 id="toc_12">9. 最后一路点击“下一步”就可以了,以后再需要再安装什么软件，再次重复上述步骤，搜索安装就OK了。</h4>

<h2 id="toc_13">配置</h2>

<h4 id="toc_14">1. 如何访问Windows的盘符</h4>
<p>执行 mount 命令后可以看到Windows下的盘符被映射到 /cygdrive 特殊目录下。</p>

<pre><code>$ mount
F:/Cygwin/bin on /usr/bin type ntfs (binary,auto)   注释：F盘为安装Cygwin所在的盘
F:/Cygwin/lib on /usr/lib type ntfs (binary,auto)
F:/Cygwin on / type ntfs (binary,auto)
C: on /cygdrive/c type ntfs (binary,posix=0,user,noumount,auto)
D: on /cygdrive/d type ntfs (binary,posix=0,user,noumount,auto)
E: on /cygdrive/e type ntfs (binary,posix=0,user,noumount,auto)
F: on /cygdrive/f type vfat (binary,posix=0,user,noumount,auto)</code></pre>
<p>也就是说，例如，/cygdrive/c 对应的就是C盘。Cygwin 还提供了 cygpath 命令来实现Windows平台和Cygwin之间名称的变换，如下所示：</p>

<pre><code>$ cygpath -u C:\\Windows   注释： -u 代表 --unix 记住是C:\\而不是C:\
/cygdrive/c/Windows        注释：  把C:\Windows 转换成在Cygwin的路径

$ cygpath -w ~/            注释： -w 代表 --windows ～/ 是用户的home目录
F:\Cygwin\home\think\      注释：  F： 是咧威安装Cygwin的目录所在的盘，think是咧威的用户名</code></pre>

<h4 id="toc_15">2. 用户主目录不一致的问题</h4>
<p>Cygwin 确定用户主目录有几个不同的依据，要按照顺序确定主目录：首先查看系统的 HOME 环境变量，其次查看 /etc/passwd 中为用户设置的主目录。有的软件遵照这个原则，而有些 Cygwin 应用如 SSH，却没有使用 HOME 环境变量而是直接使用 /etc/passwd 中的设置。要想避免在同一个 Cygwin 环境下有两个不同的用户主目录设置，可以采用下面两种方法。</p>
<p>方法1：修改 Cygwin 启动的批处理文件（如：C:\cygwin\Cygwin.bat ），在批处理的开头添加如下的一行代码，就可以防止其他软件在 Windows 引入的 HOME 环境变量被带入到 Cygwin 中。</p>

<pre><code>set HOME=</code></pre>
<p>方法2：如果希望使用 HOME 环境变量指向的主目录，则可通过手工编辑 /etc/passwd 文件，将其中的用户主目录修改成 HOME 环境变量所指向的目录。</p>

<h4 id="toc_16">3. 命令行补齐忽略文件名大小写</h4>
<p>Windows 的文件系统忽略文件名的大小写，在 Cygwin 下最好对命令行补齐进行相关设置，以忽略大小写，这样使用起来更方便。</p>
<p>编辑文件 ~/.inputrc ，在其中添加设置“set completion-ignore-case on”，或者取消已有的相关设置前面的井（#）号注释符。修改完毕后，再重新进入 Cygwin，这样就可以实现命令行补齐对文件名大小写的忽略。</p>

<h4 id="toc_17">4.将Cygwin 添加到右键菜单里</h4>
<p><img src="/media/2013-04-28-a-bref-usage-of-cygwin/setup9.png" alt="setup9"/></p>
<p>在实际使用中，要在Cygwin 用cd 进入某个盘，某个文件夹里有点麻烦，我一般是一路鼠标双击进入之后右键，打开Cygwin 就是在当前目录了。</p>
<p>配置方式如下：</p>

<ol>
<li><p>在cygwin命令行执行如下命令，如果出现命令未找到，说明chere程序没有安装，使用cygwin的setup.exe安装chere。</p>

<pre><code>chere -i -fp -c -t mintty</code></pre></li>
<li><p>默认只添加文件夹和驱动器的右键菜单，
新建以<strong>.reg</strong> 为后缀名的文件。方法：右击，在“右键菜单”中选择“新建”，在“新建”中选择文本文档，然后重命名，连同 <strong>.txt</strong> 也改了 。例如我新建的是 <strong>menu.reg</strong> 。选择它右键，在打开方式选择“记事本”。输入以下：</p>

<pre><code>Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\Directory\Background\shell\cygwin_bash]  
@=&quot;打开 Cygwin&quot;  
[HKEY_CLASSES_ROOT\Directory\Background\shell\cygwin_bash\command]  
@=&quot;F:\\cygwin\\bin\\mintty.exe -e f:\\cygwin\\bin\\bash -c \&quot;/bin/xhere /bin/bash.exe\&quot;&quot;</code></pre></li>
</ol>
<p><strong>注意：</strong> <code>@=&quot;F:\\\cygwin</code> 中的F：改为你Cygwin安装所在的盘。我这里是F盘。然后双击这个文件，点击“是”就OK了。</p>
<p>如果出现 <strong>“您在注册表编辑器中只能导入二进位注册文件”</strong> 的错误, 用记事本打开然后另存为<strong>ANSI 编码格式</strong>。如果不改名保存提示“是否替换” 选择 “是”。</p>
<p><img src="/media/2013-04-28-a-bref-usage-of-cygwin/setup10.png" alt="setup10"/></p>

<h2 id="toc_18">开始体验Cygwin的linux工作方式</h2>
<p>以后如果需要，再次打开 setup.exe 重新上述方法即可</p>
<p>推荐的学习linux资料当然<a href="http://linux.vbird.org/" title="鸟哥私房菜">鸟哥私房菜</a>啦，从左边的导航栏开始看起，从“新手建议”——&gt;“开始阅读之前”——&gt;……最后</p>

<blockquote>
<p><strong>注意：</strong>简体主站就不去看了，翻译得不是很好，宁愿你去搜索鸟哥私房菜的电子书。第三章和第四章也可以不用看了，这和安装Linux相关，而我们已经在Windows下构建好了Linux</p>
</blockquote>

<h2 id="toc_19">有什么问题可以在下面评论</h2>
]]>
        </content>
    </entry><entry>
        <title type="html"><![CDATA[重写、重构的摘要和感想]]></title>
        <author><name>咧威</name></author>
        <link href="http://funwo.tk/2013-03-25-summary-of-rewrite-reconstruction-with-my-thinking.html"/>
        <published>2013-03-25T16:29:00+08:00</published>
        <updated>2013-08-04T07:52:24+08:00</updated>
        <id>http://funwo.tk/2013-03-25-summary-of-rewrite-reconstruction-with-my-thinking.html</id>
        <category scheme="http://funwo.tk/tag/#技术" term="技术" label="技术" />
        <content type="html" xml:base="http://funwo.tk/" xml:lang="en">
            <![CDATA[ <h1 id="toc_0">缘起</h1>
<p>最近在忙<a href="http://wecaseproject.tk/" title="微盒">微盒主页</a>,之前的主页开发是由<a href="http://weibo.com/319880777">@雨宮汐</a>维护的。由于网页代码是别人写，不了解，在网页加入一些东西时显得困难。所以冒出了<q>要不自己<strong>重写</strong>一个吧</q>的念头。</p>
<p>碰巧，在<a href="http://weibo.com/blogread">@IT技术博客大学习</a>看到<a href="http://blogread.cn/it/article/1107?f=wb">关于重构和重写</a>的文章，接下来又看了<a href="http://blog.csdn.net/whatcanhumdo/article/details/5311697">你永远不应该做的事</a>（这篇文章用 Netscape当例子）、<a href="http://blogread.cn/it/article/5331?f=sa">什么是重构，什么不是重构</a>、<a href="http://blogread.cn/it/article/556?f=sa">网站重构到底是什么，网站重构到底要多久</a>、<a href="http://blogread.cn/it/article/5996?f=sa">如何避免重构带来的危险</a>一系列的文章。强烈建议去看完整的文章。下面将是一些摘要及感想：</p>

<h1 id="toc_1">什么是重构，什么不是重构</h1>
<p>重构(Refactoring)这个词最初由Martin Fowler 和 Kent Beck给下的定义，它是:</p>

<blockquote>
<p><strong>一种修改，使软件的内部结构更容易理解，在不改变软件的可见行为方式前提下使软件更容易变更…它是一种有节制的     整理代码、使bug产生几率最小化的方法。</strong></p>
</blockquote>
<p>重构的结果是引用了快捷方法、去除了重复代码和死代码，使设计和逻辑更加清晰。<strong>重构很简单。</strong>尽可能在写代码前先写测试能够防止你犯错误。小规模的、独立的、稳妥的对代码进行结构上的调整，每次调整完后都要进行测试，确保你没有改变代码的行为特征——<strong>功能和以前一样，只是代码上看着不同。</strong></p>
<p>在这个过程中发现了bug、修改bug，这不是重构。优化不是重构。强化异常捕捉、增加预防性代码不是重构。让代码更容易测试不是重构——<strong>尽管重构能达到相同的效果。这些所有的事都是有益的。但这些都不是重构。</strong></p>
<p><strong>你不是为了重构而重构，你重构是因为你想做其它的事情，而重构能帮助你完成这些事情。不要对那些你不打算进行变更或不会变更的代码进行重构。</strong></p>

<h2 id="toc_2">为理解而做简略重构(Scratch Refactoring)</h2>
<p>Michael Feather的《Working Effectively with Legacy Code》这本书里提到了简略重构(Scratch Refactoring)的概念；Martin Fowler称之为<strong>“为理解而重构”</strong>。这是用来对付那些你不理解的(或不能忍受的)代码，清理它们，这样在你打算真正动手修改它前，你能对它们是干什么的有了更好的理解，同样也对你debug这些代码有帮助。<strong>一旦你能清楚了一个变量或方法的真正意图，重命名它们，给它们一个更合适的名称，删除那些你不喜欢看的(或觉得没有用的)代码，拆解复杂的条件语句，把长程序分解成数个容易理解的小程序。</strong></p>
<p>重构可以、也应该融入到你写代码或维护代码的过程中——作为日常开发/质量管理的组成部分，就像写测试和代码审查一样。<strong>重构应该被安静的，持续的和低调的完成。</strong>它需要我们把工作精力分出一部分给它，它需要在我们的工期评估和风险评估中考虑到它的存在。<strong>如果做的正确，你不需要去解释或向外人验证这部分工作。</strong></p>
<p>花几分钟、一两个小时做重构，就像是你开发过程中的一种修改，是工作的一部分。<strong>如果它让你花了数天时间，或者更长，那不是重构；那是重写，或重新设计。</strong>如果你需要明确的留出一部分时间(或整个sprint周期)来重构代码，如果需要为清理代码而申请批准，或把清理代码作为一个开发需求，那你不是在重构——即使你用了重构的技术和工具，你仍然做的是另外一种工作。</p>
<p>有些程序员认为对代码进行根本的、重大的修改是他们的权利和义务，在重构的名义下进行重新设计、重写，为了将来，也不辜负自己的技艺。重新设计和重写有时候是你正确的该做的事情。<strong>但出于坦诚和表述清楚，请不要把这些活动赋以重构的名义。</strong></p>

<blockquote>
<h2 id="toc_3">感想：</h2>

<blockquote>
<p>我以前都认为重构就是重头再来一遍，看来我误会了，幸好在我对微盒主页进行重写之前看到这些文章，不然就是浪费时间做无用功，而且还有可能阻碍到别人。好吧，我已经弄坏了，让原来的按钮都失效了。</p>
</blockquote>
</blockquote>

<h1 id="toc_4">关于重构和重写</h1>

<h2 id="toc_5">程序员以及经理提到重写是基于以下几个理由:</h2>

<ol>
<li> 对完全理解原有代码的恐惧</li>
<li> 作为拖延项目完成时间的借口</li>
<li> 希望表现自己的能力,觉得自己重新写比修复别人的工作更有挑战性与创造性</li>
<li> 不了解重构</li>
</ol>

<h2 id="toc_6">而上级能够采纳重写意见一般是基于:</h2>

<ol>
<li> 原有项目时间拖延太长,修改难度越来越高,修复时间似乎是非线性增长的.</li>
<li> 所有程序员都建议重新再来,没人愿意进行修复原有代码的工作</li>
</ol>

<h2 id="toc_7">问题在于:</h2>

<ul>
<li> 当你不能够理解以及改善破败代码的时候,你凭什么能够认为能够写出一个功能一致并且更清晰的软件呢?</li>
<li> 首先你认为原来的代码已经是破败不堪,散发着腐败的臭味。</li>
<li> 你不能够靠读它去理解它,因为写的太烂了。但是你如果不读它.你又如何能理解它干了什么呢?</li>
<li> 凭借着从头开始进行复制文档，你又可能忽略多少隐藏在这破败代码沟壑中的细节呢?</li>
<li> 这些细节必然会重复出现,直到你重新遇见问题.找到它,修补它。</li>
<li> 当你没有能力修整破败代码的话，你修补这些细节之后的代码也会是破败的。</li>
<li> <strong>当你无法理解别人破败代码，最终你也无法理解你自己写出来的破败代码。</strong></li>
<li> 重构不是什么高深的技艺.但它需要磨练，但是我遇到很多人.都不会去修炼这项技能.</li>
<li> 迫于项目压力或者惰性，以及古老工匠守则的规劝:<strong>”当一个事物运行正常的时候,不要碰它”。</strong></li>
<li> 和测试一样,至今程序员都没有把测试行为和代码结合在一起来做。</li>
<li> 手工作坊式的做法至今仍在，当然作坊式的手法有其优点。</li>
<li> 不过既然你已经是靠手艺吃饭，那么重构的手艺以及测试的手艺才是我们需要加强的，<strong>而不是继续锻炼靠运气编程的手艺。</strong></li>
</ul>

<blockquote>
<h2 id="toc_8">感想：</h2>

<blockquote>
<p>我会试着弄懂<a href="http://weibo.com/319880777">@雨宮汐</a>写的<a href="http://wecaseproject.tk/" title="微盒">微盒主页</a>
的代码，然后改善一下，比如变量名，拆分冗长的结构还有添加一些注释，方便添加和删除一些元素和功能。</p>
</blockquote>
</blockquote>

<h1 id="toc_9">你永远不应该做的事——重写:</h1>
<p>有一个微妙的原因使得程序员总是想抛弃原有的代码重新开始。原因是他们认为原来的代码太混乱。而且有一个很有趣的现象：他们可能错了 。他们认为旧代码混乱的原因是由于编程上的一个基本的，主要的定律：</p>

<blockquote>
<p><strong>阅读代码比写代码要困难</strong></p>
</blockquote>
<p> <strong>新代码要比旧代码好的观点是荒谬的。</strong>旧代码已经在使用了。已经被测试过了。大量的Bug已经被发现了，而且被修复了。这样并没有什么不好的。把程序放在硬盘中并不能使你发现BUG。难道软件像老Dogde Dart车一样，有生锈菌会在车库里等着？难道软件像玩具熊那样如果不用新材料就不会有那么多毛？</p>
<p> 一个很重要的事情你要记住，<strong>当你重写代码并没有绝对的理由相信你会比旧代码更好。</strong>首先，你甚至没有和写第一个版本一样的开发团队，因此你并不是&quot;更有经验&quot;。我会再一次犯大多数以前犯过的错误，而且会比原始的版本增加更多的新问题。</p>

<blockquote>
<h2 id="toc_10">感想：</h2>

<blockquote>
<p>应该去看原文的Netscape例子。觉得重写代码会把之前的别人的经验教训都扔掉了，而且还是重复劳动比较多。况且我现在还没有能力做出比别人更好的轮子。</p>
</blockquote>
</blockquote>

<h1 id="toc_11">如何避免重构带来的危险</h1>
<p>重构代码很危险，它会给测试工作增加巨大的负担。除非你的程序需要重构，一定不要轻易重构代码。我这里所说的并不是把一个for循环改成while循环，或把一个StringBuffer改成StringBuilder，我说的是大动作，例如重写一个方法，一个函数，甚至整个类或包。如果你缺乏对一个方法或一个类的了解，那你重构它的条件就不充分。即使你有一个天才的计划，你也需要和团队一起设计其中重大的修改。</p>

<h2 id="toc_12">当属于下列情况时，你不该重构：</h2>

<ul>
<li><p> 对于你来说，它的逻辑看起来过于复杂，你没有花时间去分析它。</p></li>
<li><p> 你不理解为什么前任程序员要这样编写。</p></li>
<li><p> 你着手的是一个很重要的系统，而且时间很紧。</p></li>
<li><p> 你是团队里的新成员，或新接触这个项目，或这种语言。</p></li>
<li><p> 当属于下列情况时，你可以重构</p></li>
<li><p> 现有的代码对它要实现的功能显得过于复杂，并且你分析过它。</p></li>
<li><p> 修改后的代码远比现存的代码逻辑要清晰。</p></li>
<li><p> 你有足够的时间，人手，财力来支持对项目进行回归测试。</p></li>
<li><p> 现有的代码陈旧无效率。  </p></li>
<li><p> 无人认领的，写的很烂的代码都属于此类。</p></li>
<li><p> 跟你的一位同事谈论对这部分程序进行重构的好处和存在的风险，你们两个都赞成重构。</p></li>
</ul>

<h2 id="toc_13">如何降低重构的风险：</h2>

<ul>
<li><p> 权衡一下对一段代码进行重构的利与弊，找出降低风险的方法。调试一段你经过重构但却使产品崩溃的代码，这对你来说将会是在这个行业中最有压力的事情。</p></li>
<li><p> 使用自动化的回归测试，快速的验证你的修改。这非常重要，如果没有准备自动化测试，你应该在做任何修改前建好它。</p></li>
<li><p> 尽量让你的重构处于很短的开发周期，产品更新发布周期也尽可能短。</p></li>
<li><p> 把你重构的代码和其它程序隔离开，这样能让你更容易找到出问题的地方。</p></li>
<li><p> 为你的重构活动准备测试计划，包括回归测试，功能测试，反向测试，负载测试，性能测试和用户确认测试。</p></li>
<li><p> 投入全部精力来研究其中的逻辑，不要分心做其它事情。</p></li>
<li><p> 在需要的地方使用设计模式。不要为了设计模式而增加设计模式。设计模式应该用在合适的时间和合适地方。</p></li>
<li><p> 小粒度重构</p></li>
</ul>
<p>当你在开封一个方法时，如果你发现其中有一部分可以改进，那你就该考虑它，改进它。整洁的代码是我们需要的，因为写的很烂的代码我们到处可见。和你的同事讨论它们，当有人要修改你的代码时不要固守己见。重构，然后回归测试，然后才提交代码。没有人希望自己提交的代码会弄垮系统。</p>

<h2 id="toc_14">下面是一些比较有深度的阅读材料。</h2>

<ul>
<li> <a href="http://book.douban.com/subject/1229923/" title="豆瓣读书">重构:改善既有代码的设计</a></li>
<li> <a href="http://book.douban.com/subject/4199741/">代码整洁之道</a></li>
<li> <a href="http://book.douban.com/subject/2248759/">修改代码的艺术</a></li>
<li> <a href="http://book.douban.com/subject/11614538/">程序员的职业素养</a></li>
<li> <a href="http://book.douban.com/subject/3210669/">编程匠艺</a></li>
</ul>
<p><strong>忍住你的欲望，不要试图重构你不理解的代码。多问问题，努力能清楚他们为什么要把程序写成这样。也许他们有很好的理由。</strong>如果你找到一段很古老的代码，很有可能它们是按照古老的方式写的。每天都在新增的API，模式，需求和新领会都会让这些老的方式显得陈旧。<strong>不断努力学习新的技术，但不要为了要使用这些技术而过于热心的在重构中使用它们。</strong>(PS：<strong><q>当你拿起锤子，就觉得哪里都是钉子</q></strong>这句话就是表达了对新学技术的滥用，谨记）</p>

<blockquote>
<h2 id="toc_15">感想：</h2>

<blockquote>
<p><strong><q>忍住你的欲望，不要试图重构你不理解的代码。</q></strong>好吧，之前我就在我不理解的情况下，把原来的一些功能改得全部失效了。尽管后来恢复了效果，但是不敢再贸然下手，还是先理解了再说，多交流。</p>
</blockquote>
</blockquote>

<h1 id="toc_16">后记</h1>
<p>我是初学者，半吊子不靠谱。十分感谢<a href="http://wecaseproject.tk/" title="微盒">微盒主页</a>这个项目，让我有练手的机会，还请各位多多包涵。刚开始加入这个项目的时候，我打算自己增加一些元素（我审美观有点二啊，(￣ε(#￣)）。由于不理解，贸然下手，花了好长的时间才加入一个动态LOGO。然后就像文中所说的，想重新写一遍（好吧，我果然是初学者，又犯二了(￣ε(#￣)　）。然后就看到这几篇文章，深有感触。打算好好学下HTML/CSS的基础，然后重构下wecase的项目主页。就是不改变外在表现和功能前提下，弄清楚了一个方法的真正意图，重命名，给它们一个更合适的名称，把长段代码分解成数个容易理解的代码片段，添加注释，让其结构化，容易扩展，方便增删功能。</p>

<h3 id="toc_17">牢记理念，继续实践</h3>
]]>
        </content>
    </entry>
</feed>